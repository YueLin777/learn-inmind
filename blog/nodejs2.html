<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Express框架 | 英迈云科技分享</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="英迈云科技分享">
    
    <link rel="preload" href="/learn-inmind/assets/css/0.styles.66404438.css" as="style"><link rel="preload" href="/learn-inmind/assets/js/app.457f3b2d.js" as="script"><link rel="preload" href="/learn-inmind/assets/js/7.15c78656.js" as="script"><link rel="preload" href="/learn-inmind/assets/js/2.4e249c74.js" as="script"><link rel="preload" href="/learn-inmind/assets/js/1.9c787481.js" as="script"><link rel="preload" href="/learn-inmind/assets/js/14.7b647b8f.js" as="script"><link rel="prefetch" href="/learn-inmind/assets/js/10.04d02169.js"><link rel="prefetch" href="/learn-inmind/assets/js/11.01aecea6.js"><link rel="prefetch" href="/learn-inmind/assets/js/15.1088c048.js"><link rel="prefetch" href="/learn-inmind/assets/js/16.81722e96.js"><link rel="prefetch" href="/learn-inmind/assets/js/17.f0ddb566.js"><link rel="prefetch" href="/learn-inmind/assets/js/18.81de1712.js"><link rel="prefetch" href="/learn-inmind/assets/js/19.c86115ed.js"><link rel="prefetch" href="/learn-inmind/assets/js/20.c62e72ef.js"><link rel="prefetch" href="/learn-inmind/assets/js/21.4cade65b.js"><link rel="prefetch" href="/learn-inmind/assets/js/22.d59962db.js"><link rel="prefetch" href="/learn-inmind/assets/js/23.6d37c2b6.js"><link rel="prefetch" href="/learn-inmind/assets/js/24.a1e71b38.js"><link rel="prefetch" href="/learn-inmind/assets/js/25.95fbc995.js"><link rel="prefetch" href="/learn-inmind/assets/js/26.6584b2e8.js"><link rel="prefetch" href="/learn-inmind/assets/js/27.5ff13034.js"><link rel="prefetch" href="/learn-inmind/assets/js/28.e4851e0c.js"><link rel="prefetch" href="/learn-inmind/assets/js/29.94beb8f0.js"><link rel="prefetch" href="/learn-inmind/assets/js/3.9d0cc571.js"><link rel="prefetch" href="/learn-inmind/assets/js/30.4386f361.js"><link rel="prefetch" href="/learn-inmind/assets/js/31.eceb95d5.js"><link rel="prefetch" href="/learn-inmind/assets/js/32.9cd1d46c.js"><link rel="prefetch" href="/learn-inmind/assets/js/33.5528e1bf.js"><link rel="prefetch" href="/learn-inmind/assets/js/34.38eb70f8.js"><link rel="prefetch" href="/learn-inmind/assets/js/35.c6376cd8.js"><link rel="prefetch" href="/learn-inmind/assets/js/36.8f0aa0fc.js"><link rel="prefetch" href="/learn-inmind/assets/js/37.f5b35c97.js"><link rel="prefetch" href="/learn-inmind/assets/js/38.b57001d9.js"><link rel="prefetch" href="/learn-inmind/assets/js/39.866e74dc.js"><link rel="prefetch" href="/learn-inmind/assets/js/4.974b02fa.js"><link rel="prefetch" href="/learn-inmind/assets/js/40.3fe7fe63.js"><link rel="prefetch" href="/learn-inmind/assets/js/5.56ca28f5.js"><link rel="prefetch" href="/learn-inmind/assets/js/6.b865efd5.js"><link rel="prefetch" href="/learn-inmind/assets/js/8.eabcf63c.js"><link rel="prefetch" href="/learn-inmind/assets/js/9.e733b913.js"><link rel="prefetch" href="/learn-inmind/assets/js/vendors~docsearch.c2b0bf7c.js">
    <link rel="stylesheet" href="/learn-inmind/assets/css/0.styles.66404438.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>英迈云科技分享</h3> <p class="description" data-v-59e6cb88>英迈云科技分享</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-inmind/" class="home-link router-link-active"><!----> <span class="site-name">英迈云科技分享</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-inmind/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="https://github.com/hbf548" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.yuque.com/herb" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>3</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/learn-inmind/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="https://github.com/hbf548" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.yuque.com/herb" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/learn-inmind/" class="sidebar-heading clickable router-link-active"><span>前言</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-inmind/" aria-current="page" class="sidebar-link">必读</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-inmind/blog/nodejs1" class="sidebar-heading clickable open"><span>nodejs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-inmind/blog/nodejs1.html" class="sidebar-link">nodejs1</a></li><li><a href="/learn-inmind/blog/nodejs2.html" aria-current="page" class="active sidebar-link">nodejs2</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Express框架</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="express框架"><a href="#express框架" class="header-anchor">#</a> Express框架</h1> <blockquote><p>express 是一个基于 Node.js 平台的极简、灵活的 WEB 应用开发框架，</p> <p>官方网址：https://www.expressjs.com.cn/</p> <p>express 是一个封装好的工具包，封装了很多功能，便于我们开发 WEB 应用（HTTP 服务）</p></blockquote> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <p>安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i express
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello express server!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4. 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>启动</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">node</span> 文件名
或者
nodemon 文件名
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230727135247630.d4e50108.png" alt="image-20230727135247630"></p> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <blockquote><p><em>路由</em>是指确定应用程序如何响应客户端对特定端点的请求，该端点是 URI（或路径）和特定的 HTTP 请求方法（GET、POST 等）。</p></blockquote> <h3 id="路由的使用"><a href="#路由的使用" class="header-anchor">#</a> 路由的使用</h3> <blockquote><p>一个路由的组成有 <code>请求方法</code> 、 <code>路径</code> 和 <code>回调函数</code> 组成</p> <p>express 中提供了一系列方法，可以很方便的使用路由，使用格式如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token operator">&lt;</span>method<span class="token operator">&gt;</span><span class="token punctuation">(</span>path，callback<span class="token punctuation">)</span>
</code></pre></div></blockquote> <h3 id="获取请求参数"><a href="#获取请求参数" class="header-anchor">#</a> 获取请求参数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//TODO 原生的方式</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>httpVersion<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>

    <span class="token comment">//TODO express 有自己的获取报文的方式</span>
    <span class="token comment">//查询字符串</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
    <span class="token comment">//获取 ip</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>ip<span class="token punctuation">)</span>
    <span class="token comment">//获取指定的请求头</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求报文的获取'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4. 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>请求：http://www.inmind.com/login?number=98</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">GET</span>
<span class="token operator">/</span>login
<span class="token number">1.1</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'www.inmind.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'cache-control'</span><span class="token operator">:</span> <span class="token string">'max-age=0'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'upgrade-insecure-requests'</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'user-agent'</span><span class="token operator">:</span> 'Mozilla<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span>Windows <span class="token constant">NT</span> <span class="token number">10.0</span><span class="token punctuation">;</span> Win64<span class="token punctuation">;</span> x64<span class="token punctuation">)</span> AppleWebKit<span class="token operator">/</span><span class="token number">537.36</span> <span class="token punctuation">(</span><span class="token constant">KHTML</span><span class="token punctuation">,</span> like Gecko<span class="token punctuation">)</span> Chrome<span class="token operator">/</span><span class="token number">114.0</span><span class="token number">.0</span>
<span class="token number">.0</span> Safari<span class="token operator">/</span><span class="token number">537.36</span>'<span class="token punctuation">,</span>
  <span class="token literal-property property">accept</span><span class="token operator">:</span> 'text<span class="token operator">/</span>html<span class="token punctuation">,</span>application<span class="token operator">/</span>xhtml<span class="token operator">+</span>xml<span class="token punctuation">,</span>application<span class="token operator">/</span>xml<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span>image<span class="token operator">/</span>avif<span class="token punctuation">,</span>image<span class="token operator">/</span>webp<span class="token punctuation">,</span>image<span class="token operator">/</span>apng<span class="token punctuation">,</span><span class="token operator">*</span><span class="token comment">/*;q=0.8,appl
ication/signed-exchange;v=b3;q=0.7',
  'accept-encoding': 'gzip, deflate',
  'accept-language': 'zh-CN,zh;q=0.9',
  'if-none-match': 'W/&quot;15-2cHQrT0pl2WneAFgK1c/Fc/xvBs&quot;'
}
{}
::ffff:127.0.0.1
www.inmind.com
GET
/login?number=98
1.1
{
  host: 'www.inmind.com',
  connection: 'keep-alive',
  'upgrade-insecure-requests': '1',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0
.0 Safari/537.36',
  accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/</span><span class="token operator">*</span><span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>appl
ication<span class="token operator">/</span>signed<span class="token operator">-</span>exchange<span class="token punctuation">;</span>v<span class="token operator">=</span>b3<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.7</span>'<span class="token punctuation">,</span>
  <span class="token string-property property">'accept-encoding'</span><span class="token operator">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'accept-language'</span><span class="token operator">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token string">'98'</span> <span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token operator">:</span>ffff<span class="token operator">:</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
www<span class="token punctuation">.</span>inmind<span class="token punctuation">.</span>com
</code></pre></div><h3 id="获取路由参数"><a href="#获取路由参数" class="header-anchor">#</a> 获取路由参数</h3> <blockquote><p>路由参数指的是  <code>URL 路径中的参数（数据）</code></p></blockquote> <p><img src="/learn-inmind/assets/img/image-20230727143310291.ff2b1fa8.png" alt="image-20230727143310291"></p> <blockquote><p>可以看到京东的商品，打开每个商品的路径中都是由参数的，服务端会根据这个数字返回不同的商品，但是这个数字不能写死，因为有数以万计的商品，这么写肯定是不行的。</p> <p>使用 <code>:</code> 占位符， 后面是什么都可以（这里是id）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;商品&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4. 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>访问：http://www.inmind.com/10086.html</p> <p><img src="data:image/png;base64,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" alt="image-20230727143928709"></p> <h2 id="响应"><a href="#响应" class="header-anchor">#</a> 响应</h2> <p>案例1</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">/*res.statusCode = 404
    res.statusMessage = &quot;love&quot;
    res.setHeader('content-type', 'text/html;charset=utf-8')
    res.write(&quot;商品&quot;)*/</span>

    <span class="token comment">/*res.status(500)
    res.set('xxx', 'yyy')
    res.send(&quot;商品&quot;)*/</span>

    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token string">'yyy'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;商品&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4. 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>案例2</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login02'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//重定向</span>
    <span class="token comment">//res.redirect(&quot;https://www.yuque.com/herb&quot;)</span>

    <span class="token comment">//下载</span>
    <span class="token comment">//res.download(&quot;./package.json&quot;)</span>

    <span class="token comment">//响应</span>
    <span class="token comment">/*res.json({
        &quot;name&quot;: &quot;金足音箱&quot;,
        &quot;age&quot;: &quot;20&quot;
    })*/</span>

    <span class="token comment">//响应文件内容</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/test.html&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4. 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="中间件"><a href="#中间件" class="header-anchor">#</a> 中间件</h2> <blockquote><p>中间件（Middleware）本质是一个<code>回调函数</code> <code>中间件函数</code> 可以像路由回调一样访问 请求对象（request） ， 响应对象（response）</p></blockquote> <blockquote><p>作用：</p> <p><code>中间件的作用 就是 使用函数封装公共操作，简化代码</code></p></blockquote> <h3 id="中间件的类型"><a href="#中间件的类型" class="header-anchor">#</a> 中间件的类型</h3> <blockquote><ul><li><p>全局中间件</p></li> <li><ul><li>每一个请求 到达服务端之后 都会执行全局中间件函数 声明中间件函数</li></ul></li> <li><p>路由中间件</p></li> <li><ul><li>把请求发过来之后，路由中间件是和路由放在一起的，只有了 满足某一个 路由规则，它所对应的回调函数（中间件）才会执行</li></ul></li></ul></blockquote> <blockquote><p><code>进站口： 全局中间件，每个人来都要检查身份</code></p> <p><code>检票口：路由中间件，不会对每个人都进行检查，只会对一部分进行检查</code></p></blockquote> <h3 id="全局中间件"><a href="#全局中间件" class="header-anchor">#</a> 全局中间件</h3> <blockquote><p>每一个请求 到达服务端之后 都会执行全局中间件函数 声明中间件函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">//1. 导入express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>


<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
* 声明全局中间件
*
* @param req 接收请求报文
* @param res 接收响应报文
* @param next 内部函数，函数执行之后，指向后续的路由回调
* */</span>
<span class="token keyword">function</span> <span class="token function">recordMiddleware</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>url<span class="token punctuation">,</span> ip<span class="token punctuation">}</span> <span class="token operator">=</span> req
    fs<span class="token punctuation">.</span><span class="token function">appendFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./mylog.log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ip<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\r\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;先进来 全局中间件&quot;</span><span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用全局中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>recordMiddleware<span class="token punctuation">)</span>


<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;首页&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/admin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;后台页面&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;404&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4. 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="路由中间件"><a href="#路由中间件" class="header-anchor">#</a> 路由中间件</h3> <blockquote><p>如果 <code>只需要对某一些路由进行功能封装</code>，则就需要路由中间件 调用格式如下：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/路径'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">中间件函数</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/路径'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">中间件函数1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">中间件函数2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>访问 ：http://www.inmind.com/home</p> <p><img src="/learn-inmind/assets/img/image-20230727162924546.3f6694f3.png" alt="image-20230727162924546"></p> <p>访问 ：http://www.inmind.com/home?code=520</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAoAAAC6CAIAAACoQzgdAAAgAElEQVR4nO3de3xU1b338V9QEbQi1CQEvBGFChOIXKwtE5/XAwEPATlypKd4dEyoh1NfpSqlJJLoAXw1KCSYpAhSPD3NQRMHD1hjQQxjhYGnmsEq14QMINQJihgzQUBuMWRmnj/2nsncb5lc+bxf/gF79qy9MiRxffde67fiHA6HAAAAAIBIr87uAAAAAICu4urO7gA6mt3uaLHZ7AqHw263d3aPAAAA0FUQD64UNput+XJLi83GdDIAAAAEQjzo+ewOR1PT9y02W2d3BAAAAF0d8aAnczgc3zc3N19u6eyOQOLixO6QuM7uBgAAQHDEgx7L4ZCLTU02G0sLugQH2QAAAHQHxIOeye5wXLh4iWUGAAAAiAjxoAey2ewXmy4RDQAAABAp9j3ogS41NZENAAAAEAXiQU9z8VKTnXAAAACAqBAPehRlZ4PO7sUVYeOGjRs3bOzsXgAAAMQY8aBH+b75+87uAgAAALqxNi1Ntljq3qr4y6SJE8aNHR2rDrXRNw3WEye+Gjr0jhv79evEbpw7d67moLnu+BfWxkZxyA9v+uGtt9w8YvhdAxMT3E+z2WyfHT02YvhdMbloU3PzlTOr6GhpzubbF2ZPTuzsjgAAAPQo0ccD86HDxStfsdls1/a+tuvEg5MnT357+vTu3XvHjLn7hwMGdHwHLl68+Od3Nu3Y+aHfoqL33jPuF7N11/XtKyI2m63k5VeG3nlnTOKB3W5vbr7c9nYUzc2Xe/e+JlattYODe2vkeM2KYok2IdSsm1daK5Iw69nc+wbGuncB1L6eV24WTVZBVkoHXfGK1Lhp7uQlVdp84x9mxHfQJasLR2fqRffG/oWpMWnupbsf04uu7EBuTJrrWA07i4sN1oSMBTkTyO4h1JbllZlFk1kwm98IALqWKOOB+dDh37+8xmaz9e7d+5+nT41tn9oiOXnI6TNnbTbbvv3VY0andnBCOFBz8H/WlZ/97jsRua5v39tuu/XmwYN6XdXryy+/+uzoMbvd/snuPZ9b6n77m18nDRz48itra82Hh955Z0wu3dwSs62Rz58/96fSsvm/eTIGbX1jLF5eeTyqt94+PcjQf+TDKxfevGzFxi3rPhoVxfj+4IbSWhERsf69puG+gQxjpGFHcYnBmpCxIHui96cR5KWuqNFkqBIR05GTIh0UD6oNehERi6VRUjsqkXQttWW55WbRZBZ2w+SrjNGdel56V+5KePOT35R/xCAniDh/Gzj/1j3/xQGEIZp4cPjIZyUvr2lpaenTp09u9m+Sk4fEvFtR63/jjePGjt67d3+LzbZvf/XY0XcPGNC/Yy69Z+/+1X/4L6UPukdm/fiese6vXrrU9LePqja9W9l46lT+iytuv+3Wz44ei+HVWy7HLB5sfrfyc4vlk09233vvPW1ta2B69sr0QC+e2lb4uy1WGfWLVXNGBjrnaGnO6pogF7BuXJ7jZ4FwsDYPbpj/WpUkzHo2d+CWnNVbVmwYWPTwqCCXuBI0mPdYRRLGpfgZDwR+qUuK12akialKe9fgDrtkaoZO9HpJTr4ys4FI7R6ziGjGdbuRou/Q2VyWV9xdknAMeWYkERGroSR3T0Z2tntE8Pm4zOW5eT0vUAGQKOLB4SOfFf1+tZINnlu44Lbbbm2PbrXFjf36jXUmhL37D3RMQmiwNr76x1IRuXnwoIXZ82+80XvlQ9++fabcP+nee8aVvPzKlye+im02sNsdsSpm+uWJrz7++6ci8u6WytGjU3v37h2TZv05uG2LVSTl6cDZwCnl6ZWPDwu72Q3zX6sK8apzTtGcoqdLc1aXFt7cgVOMwtCws6jEYPW9M1dblltubo9pG7UGg1VEk+Gn3SAvdVHxM9bun9Gxl0zN3X8gt2Mv2YU07NxqFknImNotB4nuj8WUW+NWg6F2Yo8Z8TZYrSKS4DXQ9zpH/RdsPUd5kmA1lO3U5LQeKzd7NKWkBfPWnQ0p3efXA4DwRFa56KD5UBfPBgolIVx91VV2u33v/gOnT59p7yu+s+ndyy0tPxwwYGGOn2zg0ve6vtdcE/s5/ZdjN7PorT9XKH84+91327bviFWzvo6WvlYlkjYn/HF/q1PbCuctM56K+H2e2UBERIbNKXp6lHXj8pwNwZ5RdDDrF1Z/h5X/0beD2t1mEdHc42dEFOQlQKT18ZKmG44QU2YXuD8oSJyYmZEgIlZrQ+f1qV0kJAT/1xmXWVDonh9SsgozNeL+q0iJEKLJaj0tZbZyjsFQ2w5dBtCpIogHB82Hfv/yK10/Gyg6MiF8++3pXR9/IiKZun8LUjGpubm5+PerP7fUxbwDdrs9Ju3sr66uq2tdKbBt+46zZ8/GpGVvNetW18jt0xdGM6vnG+NrW6zS8OmhbyK74rz5r1UlTnt+pfeDgmFzip6fnlBVmlO8racNCsLSsNNgFknIyPCNAEFeAkREpHarwSqimdoz7h8rw+FQg+meJnHCxFA/4WoI9PpVkJKhxKmGK/I3J9CjhTu5SMkGNpu9W2QDRYfNMvp0z14R6X/jjWNGB6w0cvny5ZdKVh099o/26IDdEYN40NLSsmnTeyJy8+BBffte9+3pb7/99vSmd9/LeuzRtjfuSV0ZfDyMef/D5hSt8jxydEvl8WAVh0Y+vLLoYY8jDR8tW7GxIdha55sm564aZSxevmLeJ9Oefy79pvC/lCgp04eUP/s+01eYy3PzlNcXZEl5sfN0q6Ek1yAiasET90IxHhOIveYmBVw82lAb8Oavx0uNm+emLzGJrrz6mdbvcr8HnYV3yiUrUy/apdvWupUQUor8eB501RrKl8WTl1R5lQBSXvU6WL0iNUvvdV3v1pyVi9wKATVu+vWkxSblPK+OuZ+mdFJExO0Sbge9ixR5Vy5SPpa0/O1rH4xXmlXf5q8YkfoZSus5YdZ68Hyj95fj/Nwk4Anu3VY+T69Ouh30/1FLiGUH7t+Q/uvzuP8giHhO9XE7ISEjO3uC7Cx2/hS0ntbQejDAalrPFbdBywQ17PAfhz3n3Pv8EHlP3A+wYNe9q0pPAqztCnG5yFi/sIok3JYQ+szQzfjmpsTEBBGr9QuryJWVqIAeL6x4cPa771a98qrNZheR4XcN27PvwJ59B8J544/vGXvLzbFfIXju3Pnw51n0H9C/sfGU3W7fX12TNv4n7TGZvq7uCxEZNVIT5Jyjxz7XjBiuGTHc6/iI4T9qewfs9hgsPNj5/z48deqUiMyc+S/Dht5ZufWvhvf/unv33okT/u+tt9zc9vZdjpa+ViUps6Y3bNwS+WSZb4yba0RGPRDuUgG1gGkYqxcGpmevHPnRshW/m18ZtGhS23mOV8RqKC6WYDODw2L1qCgiIuby3OLW4KGM4sS8p1ZSPMYaYS9KVpf86g3Vz6Q6x4mNVQaTiIjnQYtFRHRTU1NFJ3q9yWBqnPGgc1iqFvnxPHjySJVIWkZafLxkaKXKpN9avbC1OaUSkXgerLOIiG5KRIU/3cf3ImJaPHmueI+YReo2zc1yG1XrM1OlvPpxi+dQW//YaAmjjOlJtzQiIqLPuls8EkKj1wnKOXoJyetrERHT4iWb0jwTkXidMPnuxf5G+ZbNcx9zyydKJ+fUeYQW9XPweW/gdOD9DWkuz3vdc2juuxxWxGooyTP4GxDXluUZzO6nFcuC7ESDRwtWQ0mReCQE30uYy/Ny/Q+41UG5JtMjn3iN6ZUmXq91fiHe8UY9ITfPK+c0eP94ipjL83wLCnn/chA/y3/9dMmDn7XCrnsKImHmDSUpuf5lGxqs4jdlJNyWIGar1dpAPgB6lrDiwf9ueLu5uVn58/4DNfsPhDtN+6uTJ5+a+0SUXQvsH59brI2Nkb6rpaXls2P/GKkZEfP+nL9wXkT6Bd2ITTPiLs2I2Gx/5svvHgsRuXDh4l8/2O73pbf+XLFg/tNtbN/l1LbC1TUJs559fERNoXqoZt280ga/TwMCli2qeW3e/BAXun36wgePr1hdkzDr2aL7xFg8Pyec+qq3T1+4anLDhvkr5n0ybdVzAWsutYW5rNztFqZzCeDW2gmzU0RSsgoL/N7pzy6cEKyivNVQbnAfFiijFreVhSnjNGI2+47jIliUHJ/mPXZvrDKYJE2r9T0ouoxUEZmiE72+ylDV+KBz2Pq+XkSbpjX5HszQxotIWoZWTCb9+9W57s1ptWm+B0U3NZJ0oM/K9HkUYFq8rnqG55BXv2RJWv72aiW6KLfP9Zmperfb5+pdeY+44lfVkswqbb5xv/JlqklA/+qmOc5BfOPmxYtN4nlf33fc76tx06+Vc9wfYjRueknNL42b5yrZwP1hhfqoQZ9ZOMXrCYZ+8RLt0m0HlA4ouUKJKK63O9/rHgJFJNiiZKuh3JCQkV2gfPOog2OzoXURa8POYmXg7n47Xx34uo+/nc0ZrK5vb+cC4pI898cIShKw7jE3TEj0vIT7cLn29bxys2/7ajbweXZRW6YMxD1+6GrLXne9q8Tgs/BXacpqKN+Zku36Ysudzbja91dvtGFnUbnZ6zOpLcsrM5vLymqje4bg50aan/TirbasxGAV0WSyIQNwpQorHowZk/rJ7j02m01Ebrl58PXXXx9m6+PGtMt2aYmJCS22cBfjXr7ccv78eRHp1atXYny7VB7sFddLRJTPp5t6972tTU1Nfl+qqzu+d+/+sbHY+U6pZJo2p+i+gXLKOe4/lfjA89PX/W55zkafaqReM4uOluasrvE/rcjVsudUJdfbfeqr1qybV1rrc74i0Wd6Ukx5TG9IycrS5JWZpa2337wqkyROyMn8Irfc3DpaUoKHt4gWJccrY/e6Omd5/5NHqkS7NH/ukMluY3flUYBSVlSp+Nm6BUGjxSKim7v0LklfYqhqnDEj3nnQWRVUfUbRuoXAycMmSctfOjd5ktuDi5OHTSKRli71uHGemlum02fp/exVoCtf63qskbrwDZ3+Mb2INt/oem/8jKX5hvQl7nElAI+t2eJn5OcbJi+pav00qkuXmEREV+b+BCM1d3+5BE8I1f+z2OTVuIjEz3hGqdfkatYjBsQ/uNYoc/12270Dqc+U6/SZepG0/O2ut8c/uHSpYdJik3ciCrYo2eMbMnFiZsaeEoPbJBRlxYL3VJ/ECdnZUlxssPo85UrIWOAaHTtb87zTn5KVqckrN1v31Krf8eqiCM9b6SmzMzW55WavH7faMn/ZwHUH3Ws+UkrWbOXlnQbPSj7OSxRkvu6nJ17PJZynuTWsBnLPyzm/rtYeJ07ILpzg+4n7532y+nTCI714cj7oSMjI7jHlmwBELKx4cO89406d+nbDWxUiYrPZnpr7yxtuuKGdOxbM4EFJgwclhXNmc3Pzp3v2KX++847kxMS2zsD0SylVdOrbb9uj8XD0iotrS2HTr+vrTaZdQU545y+bR6WOvObq6PfYFhGpWedvBC83DUyUgbmrJh/cMP+1efMDLyqoWbc64LSig9u2WCVx2uTusH2B91hceTrfxkb9DNGU5wVBZwVHuihZHbs7b/xXv68XbX5a/GDRtu4J5v4oQCR1qk70euewsrHKYBLdr1LjJVlEf/ikzIj3fNogrmcUzvBQbdCLdqnW6xoGvTIZKZKPyHsm0uC70kR8K+B6nTb4Lq2Iyeta8UOSRUwSincP45OHuF+x0VInItr8Od4RQ/nQAjZb/b5eRHS/CrAndMBm/U4PE5+HMIOHa0VMrn9BZ9f9fMXBFiV7f0MmJiSItH6XO6tt+j52SNSMSzD45AOvyW9qa14/Sp4/Septc3NZXp5v9zx/LGp3m/3Nr3Ouxg1UsFWZju/vyVvKPRoxm617zA0TExMDf7HKaa3Xa1B6XJ7np0hurKb3p2QVLlAeLbrSixvn1CY2vQaueOFWLpo65f6Hfz5TRL6u/2ZZYfG5c+fas1exoWSDixcvisiwoXcOuf22drrQHclDROTQ4SNhTvKx2+1l+jf/XLEpVh2I6xXXlre//fZf3P9aUfGXVavXfvLpp64jZ7/7bseOnW25xKlthfNKa4OWKhr58Mqi56fLxuU580oP+ryqrGb2v0nCqW3vVYncfu/I9l9S3KOEuyi5VXxahlbEZKhqFJHqrXrlpr/yVMHtoLZ1XJw6RSci+verRV1FoB0+WHmq4H7QfVDuvIapUdShcHJyvDq0dTvoNX7thk4eqRKJfC815WGLdnigRydBmo2P6Q6WbdkLLUiBoMSE2NzDCVAd2J+E2xL8nR+iilHA6fjeR8OthhRBj9skUTPOX58bdhbnlptFNFkFBQGygZ8eXpmlnoArQAT3g6dOuV9ENrxVoSSERc8+E/4so47XYdlARMaOGf36G2+eP39h9559Xpsl+/XO5i3GHX+76qqr/nVmbLZv6hXXyyZRFi+qrTWHs0fbXz/Y/tOf/qRfVE+NAsz88cNZQei1efM9FxPXyNg5KVWltavn53jviKzUOU2c9ouAi4kDbpRWVZrjezycfnYHIVfvR7NTsjq/6PBJmXHSoHcO6+O1GWmyxGBqnKG11HndNVfmF1ksjTK4ymASbX5avDhvkBuqn0mVI96rCNSb3EdOipzcqnc+WIhPy9DKYkNV44NpFotHAumulMcXvrObQlBu5JvUZy8RNas+WIjNftJt2ik5yIJW9V57m0vtKJcIvh2YKnFidsHEiDopErxoj8egOdzVu84eh9qzOYqlySGpbQZctax8sb5zIINlJADdWWTTRdwTwvIVJc8uXNA1E0JHZgMR6dfvhvvSxn/4kWn9hrd+NGxokG3RRKTu+Bdb3jOISJr2p7HqQK9ekW1v52K329/+y2avg+6Vi1wHm5svb9lS+egjkc7JV4qKJsx6tijcWkPOCkKrlxlba4yOGjlMRq5aKfKNEh5EEqc9/1z6Td8Yi5dXHpeEWXOCVCP1LXUafO1BN+S+IlOhjPCDDN+i2ylZGbvr36+eKvrWYX188hARvaGqWgxVol3qcV9fTQJV1WIwSVq+OqoffJdWRL+1OkP0bjOL1GukZWilSm+oniL61gcL8cnJzmu4tdONKXONXNOoXBo3rQ26NlmZ7xRw5UOgZl01oCJ+XuFPG3dKVmYH+Zvfon7ftv12dOBLxKoFZTjvWwzMuW7HOWgO1I660Vjr9ZS8oU5Jaj/Oj7j1Ig07y4JlAxHXXEWv3zNBbjEA6N4iHla6Zhmd+Ork8hUlFy5caIdetUkHZwPFjH9+oHfv3qdPn1lRvPLs2e8CnVZ3/IuXSl52OBz9b7zxXx+KzaMDEYl6VcDfPqxqtIZbA+rjv3/65YmvImr/aOmKjQ0pT/vsRBZK4n3PFa3yu//AwPTslUWrVi6cJZW/m58zb3nlcZG0OZG23y0E2LrV/xQEq6G4eKfrfNf9xdZ0UFuWm5eXW+ba3jTanZKVCSr6tWst7sP61Kk6EZNhrcHkO/xUhrOGVw1VbjOC4rUZaSJ1r67Vu9Yxu18jWUT0a1+1uD9YSJ2ic7YjQ4a0XqNx89zU0XfP3RxxLbPOljpVJ0p91U2uvntvViAiItUrUkffnfpStfI35aMTfWbqrze5fc3VhepfU+fka5UypoXVrS87N0nQLn08omqw/rV5p+SUqRkJShnT19123HV+38ZkI76Ue5QtfUuKd7j/INWW5eaVee3yW1uWl5vneZpHC96dVP6aOCFDI0oF4Z1ub3WWJNJkOB8C+OuJv4qoKePU84p2evT49TyPDiROyC4sKAj8X9BHB7VluSXeH7HyrxniQZCyA5rVUOz2O0Qp3OT3PgKAbi6aYaXrGYKSELrUM4ROyQYiEn/TD3/1y8dXrfmvr05+/Xz+ssd0D98zdoz7CQ3Wxg8/Mn2wfUdTU1OfPn0W/ObJfv1itry7V6+4KFYnX7hwsXLr+77HV7+yNtBbIi1y6rupWUwcLV2x0e3/n1Wl68aG3NagO1FnIxiK8wzitkxQXZDp3C7NvcJJQkZGgkE9v7WZjAWt5RE99z1ow07JytMAU5VJdL9qHWimKjVMTT6PAlyThUyumUXK0bQMrSw2mfyuInC2ZhLdXLdrKHWQvCYjqXsvuFdK7S6cZYJMiyffvbj1sE6n07svTVbWIrfWFY2fsbbsSGqWXkxL0kcvaT1Pmz9HRFoLDfnZQsGzSlLUYrBTcuIEtfyQ70pcr50HoqbW/FH2UvC8gueJSh72c9s+JWtBRrGfTmoy1deVOkhi9f7R8yr7E6AnGo3GbHZ/gOCqY+a+TYG/HofNz34LSvey3P7tlDsO/pdEt/6ecRaMcv7+cb1M8VOgJ4pyUsrUKfcr8+ZPfHXyjTc3xrRLbXLk6LGOzwaKsWNG//Y3T97wgx+cOXv2lT/88dfzsguLVr6xfkPpurJnF/9u4bOLleKh119/Xd4zv435ttNXR/4AYavh/UDFTAOpqzu+v7o69Hnt5tS2wnnzc1bXiIz6xaqVRcp/T4+qXT0/Z94y46lO7FksJU7IyfQ3HkjJys4INMlXM7vA/T0JGQs81hcqNyaddwgjX5TsRllt7F3xZvBdacpR363KlMXG3pV8lEcEAVYRpGbo/LQ2eLhWOeqeQNTWIy1k1DWk5u7fvlTrdkBXXr1/odeuyeoH7v5Vpy6s9nqj6N5wL6L6hwPVZTqPVrT5xv1+9myORpuWHbgkTswuKPT6Pk/IyC4IsqtxpFJmFxR4/8hoMn3uryt39/1+z/vppHvqlpSswoIFPlcoKPRe8JAy2+s0TWZhQZbvrskpWQWFPu1lxfIz8e2eWjEptMQJOR6/ZESTWdCmHZ0BdF1xbdlRa0ul4c8Vm1zTjbqCz44eO/7Flx2fDVwuXLj4v2+9/eFHfsoeXnvtteN/8uMHpk1JaIftF+wOx/kLFyN6y+efW2z2iBc0/+AH1w9KCquqbHDhr1cWEfflxQG2NFYWOYjnwmXnwYiF3mV544aNIjLr4VlRtB5LQfZKC/KeohKD/1WbQV4CRMS5AZn3bgAAgJ6jTZXsp0/LmD4tI1ZdiYkfDRv6o2FDO7ED119/3ZxfZP585r/UHKytO/5FY+Opi5cuXde37733jhs3Zkzv3te003V7xcX1vubq5svh7hYnInfckdxOnYkh18bJaXOKVgULEon3PVd0nzR8tGzFvGXTnGualYPwFN2iZECkzYuSAQDdQNs2ukIA/frdkKb9aQxrE4Xj2t69I4oHneumybmrJoc+LcLVC+SB0KJdlAzEYFEyAKDrIx70HHFxcb2vuab58uXO7gi6tJTZBQWRvwSIKGVzJnR2JwAA7Yt40KP0uba3zWaLYkUBItX5qw4AAADaQZuWJqMLcjjkwsWLkRY5BQAAACTqwqbosuLi5Lrr+sbFdXY/AAAA0A3x9KBncjgcFy412ZllBAAAgEgQD3qyi01NLS22zu4FAAAAug3iQQ93uaWlqel7/o07XVyc2B3CnC8AANDFEQ96PodDmpq/v9x9tkQAAABAZyEeXClsNvv3l5uZawQAAIAgiAdXnJYW2+WWFrvd7nA4HCJ8AwAAAMCFeAAAAABAxb4HAAAAAFTEAwAAAAAq4gEAAAAAFfEAAAAAgIp4AAAAAEB19bF/fN7ZfQAAAADQJfD0AAAAAICKfQ8AAAAAqHh6AAAAAEBFPAAAAACgIh4AAAAAUBEPAAAAAKiIBwAAAABUxAMAAAAAKuIBAAAAABXxAAAAAICKeAAAAABARTwAAAAAoCIeAAAAAFARDwAAAACoiAcAAAAAVMQDAAAAACriAQAAAAAV8QAAAACAingAAAAAQEU8AAAAAKAiHgAAAABQEQ8AAAAAqIgHAAAAAFRhxIMWS8WCSXdkrbcEO8lSOlOje8lY3xKrjgEAAADoaFeHPuXErrffNFrqjbphycbF4/v4O6X+zZz/eOeQvKOTIfv0P0/yd8qZQzv2ft22vvoYoBk/JslvhwAAAABELs7hcIQ8yfKmTvvo+npJenS9Sf9IsvfLJyp0P/7Z+noZn28KlB9Edr0Yp13U5u56mqn/8u1Hb4lxowAAAMAVK4ynByLJj6wp/dD4wNr6XR/sq38k2fPpwJnKZU+urxf5adGagNlARPr0vz89PeSVvjYbD9aLJI2YqBkUumvJ/cPqPgAAAICweD49qK/MySre5/fEcxbjxzL+/uS+XsdbvjbvOFQvkjQyXTPI/zVmLtv+5D1h9Wbf8kFjn6uX0UV792WPCesdAAAAAGLG8/Z7yxnLB0Zj4LN3fRBwfXL9QWP9Qf8vpeeH2RnLoU/rRSRpppZsAAAAAHQ8z3gQn77IuP3JEG85Y1z+sxc/kKS5f9L/3Gcdgj+DhobXlybL3ndEJOmp+8eH9wYAAAAAseQZD/okjZnot+6Qu327HhUR0T2kS58YTdmgM4eN/msYHavQi4ho+5w2GncEaWDQ2Ikj+kdxYQAAAABBRb62t95irheRmWNHRFlS9NBbkyYtCfJ6Rc60iqANvGBy/CfPFwAAAICYCxQPmup3m8zn/L1yzGgUkeHJl44ajUeDtBzqHv/Q8ek+65xDOGcxfhx0czYAAAAAbRAoHpwxrpikeyvw+w4X/0d6cdCWQ93jzyrevjjCZwAfvxg3PtZ7JwAAAABwCjG5aEzmf+pGDYisSYsxZ21ltP2xVL5UcUhkxEPZ08Jc0AwAAAAgRkLEg+SpT2U/EnKxsqePm9oQD+r3LcxZJPLC/yEeAAAAAB2tV2d3AAAAAEBXEapy0fnTZ85EWKHo9KWoewMAAACgE4WIBxVPaCqe6JieAAAAAOhkXWxp8gnLXhGRpCj2YwAAAADQRl1saXLj1xYREW1yhNcEAAAA0HZda2ly/SHTPhGRscm3dHZXAAAAgCtPl4oHlvfKK0RE5o4Z0dldAQAAAK5AIeJBxaOD4iIV7cbGTR+vX7NVREQ+WLNotbG+KbpmAAAAAEQpxNqDpJHpmkERNnnOYvzYEuT1Pv3T0+8X6e9ZL/X8ri/ZLSoAAAQ4SURBVOLfLtqn/PlY5Zp5lWvmJc/ML1o0d+aYeOc58WOKVhSJjGBhAgAAANAe4hwOh7/j9etnDdK9JTPXf/12xEuTX4wbv0jkBZPjP8eH+ZYWy/p/1+rK60WSnqwwZfepWLSwaP3BehERSZ42Nzt7yZPpZAIAAACgnXX+2oMzB9fn/JOSDWR8fkXRQ8nJU7P1NZavjUWPjkwSsVSufWrSoEGTnlhjPMF8IwAAAKAddWY8aDphXPPEpBGjdMU76kVk/LPbKxePd0456pM00T0k1Bv/+6lJtyZPemKNsb4TuwwAAAD0ZCEmF7Vh7UHgyUXnLfs+qCz97+I1W51LFJLSs//wp6KHkgO0eObQO2sWLVxUcUz5a/K0Z14oeu7REf0j7BgAAACAoELEgzbwjAdNZyyHTbs+NBrXV5R6LFxOnplf9MLTM0OP9Vvqd5UXLXqu2Pn0IHlmydulvx1DRgAAAABiJUTlopl/NJf+PMLHB7uKBkx70fvgeVPx1AfWuM0LSho57WdPZC/6ZXpSH+9z/bs6afzjRdsfmrM+/6ns3xvr5VKfpP5kAwAAACCGQsQD+cGA/pEOwgf09XMwflpRWfbb/6QfMPGBaZnTdBOnjRkSZizw1H/EoyXbp/37+hfK+jz5SKDJSAAAAACiEWhyUbtoapI+UYUCAAAAAB2gQ+MBAAAAgK6s8/c9AAAAANBFEA8AAAAAqIgHAAAAAFTEAwAAAAAq4gEAAAAAFfEAAAAAgIp4AAAAAEBFPAAAAACgIh4AAAAAUBEPAAAAAKiIBwAAAABUxAMAAAAAKuIBAAAAABXxAAAAAICKeAAAAABARTwAAAAAoCIeAAAAAFARDwAAAACoiAcAAAAAVMQDAAAAACriAQAAAAAV8QAAAACAingAAAAAQEU8AAAAAKAiHgAAAABQEQ8AAAAAqIgHAAAAAFTEAwAAAAAq4gEAAAAAFfEAAAAAgIp4AAAAAEBFPAAAAACgIh4AAAAAUBEPAAAAAKiIBwAAAABUxAMAAAAAKuIBAAAAABXxAAAAAICKeAAAAABARTwAAAAAoCIeAAAAAFARDwAAAACoiAcAAAAAVMQDAAAAACriAQAAAAAV8QAAAACAingAAAAAQEU8AAAAAKAiHgAAAABQEQ8AAAAAqIgHAAAAAFTEAwAAAAAq4gEAAAAAFfEAAAAAgIp4AAAAAEBFPAAAAACgIh4AAAAAUBEPAAAAAKiIBwAAAABUxAMAAAAAKuIBAAAAABXxAAAAAICKeAAAAABARTwAAAAAoCIeAAAAAFARDwAAAACoiAcAAAAAVMQDAAAAACriAQAAAAAV8QAAAACAingAAAAAQEU8AAAAAKAiHgAAAABQEQ8AAAAAqIgHAAAAAFTEAwAAAAAq4gEAAAAAFfEAAAAAgIp4AAAAAEBFPAAAAACgIh4AAAAAUP1/K3x5KoQRPewAAAAASUVORK5CYII=" alt="image-20230727162945791"></p> <h3 id="静态资源中间件"><a href="#静态资源中间件" class="header-anchor">#</a> 静态资源中间件</h3> <blockquote><p><code>express</code> 内置处理静态资源(内容长时间不发生改变的资源 css、 js、图片)的中间件。</p></blockquote> <p><img src="/learn-inmind/assets/img/image-20230728100213539.e97ab11a.png" alt="image-20230728100213539"></p> <p>静态资源中间件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;首页&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//静态资源中间件的设置，将当前文件夹下的 public 目录 作为 网站的根目录</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>app.css</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">*</span><span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>index.html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css/index.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/md5.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>来到金足印象<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/logo.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>访问：http://www.inmind.com/</p> <p><img src="/learn-inmind/assets/img/image-20230728100302440.7dec74d7.png" alt="image-20230728100302440"></p> <p>访问：http://www.inmind.com/css/index.css</p> <p><img src="/learn-inmind/assets/img/image-20230728100330312.f2599910.png" alt="image-20230728100330312"></p> <p>访问：http://www.inmind.com/index.html</p> <p><img src="/learn-inmind/assets/img/image-20230728100405870.1e96a637.png" alt="image-20230728100405870"></p> <p><img src="/learn-inmind/assets/img/image-20230728100419072.5261675a.png" alt="image-20230728100419072"></p> <h3 id="获取请求数据body-paraser"><a href="#获取请求数据body-paraser" class="header-anchor">#</a> 获取请求数据body-paraser</h3> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i body-parser
</code></pre></div><p><img src="data:image/png;base64,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" alt="image-20230728102619631"></p> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//导入 body-parser 包</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;body-parser&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//解析json格式请求体的中间件</span>
<span class="token comment">//const urljson = bodyParser.json()</span>

<span class="token comment">//解析 queryString 格式请求体的中间件</span>
<span class="token keyword">const</span> urlcodedParser <span class="token operator">=</span>  bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">//响应html的内容</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/login.html&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> urlcodedParser<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>login.html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">body</span> <span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #34495e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #191919<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">opacity</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box h1</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;text&quot;],
        .box input[type=&quot;password&quot;]</span> <span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #3498db<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 14px 10px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;text&quot;]:focus</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 280px<span class="token punctuation">;</span>
            <span class="token property">border-color</span><span class="token punctuation">:</span> #2ecc71<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;password&quot;]:focus</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 280px<span class="token punctuation">;</span>
            <span class="token property">border-color</span><span class="token punctuation">:</span> #2ecc71<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;submit&quot;]</span> <span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #2ecc71<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 14px 40px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
            <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;submit&quot;]:hover</span> <span class="token punctuation">{</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #2ecc71<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box a</span> <span class="token punctuation">{</span>
            <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #2ecc71<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 14px 40px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
            <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box a:hover</span> <span class="token punctuation">{</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #2ecc71<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.inmind.com/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>后台登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户名<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>登录<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="图片防盗链"><a href="#图片防盗链" class="header-anchor">#</a> 图片防盗链</h3> <blockquote><p>防盗链： 防止外部网站盗用网站资源，禁止域名之外的其他网站访问本网站的资源</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.nlark.com/yuque/0/2021/png/411176/1626505030674-2c16768c-e3a4-4cfc-a1db-6647e30d0a1f.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230728104250004.bb95a5e8.png" alt="image-20230728104250004"></p> <blockquote><p>这是因为在发送请求的时候，发送的报文不一样，就是这个<code>referer</code>（引用），这个<code>referer</code>会自动携带当前网页的域名、协议和端口发送请求。有了这个标识之后，这个请求发送到<code>yuque.com</code>服务器之后，通过这个<code>referer</code>来判断请求的来源。</p> <p>如果是<code>yuque.com</code>发起的请求，就返回，否则就不返回。</p></blockquote> <p><img src="/learn-inmind/assets/img/image-20230728104806545.29db0a87.png" alt="image-20230728104806545"></p> <h2 id="路由-router-模块化"><a href="#路由-router-模块化" class="header-anchor">#</a> 路由（Router）模块化</h2> <blockquote><p><code>express</code> 中的 <code>Router</code>  是一个完整的中间件和路由系统，可以看做是一个小型的 app 对象。</p> <p>作用：</p> <p>对路由进行模块化，更好的管理路由</p></blockquote> <h2 id="ejs模板引擎"><a href="#ejs模板引擎" class="header-anchor">#</a> EJS模板引擎</h2> <blockquote><p>模板引擎是分离 <code>用户界面(html)和业务数据(js)</code> 的一种技术</p> <ul><li>官网: https://ejs.co/</li> <li>中文站：https://ejs.bootcss.com/</li></ul></blockquote> <h3 id="常用语法"><a href="#常用语法" class="header-anchor">#</a> 常用语法</h3> <p>执行js代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">%</span> code <span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre></div><p>输出转义的数据到模板上</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">%=</span> code <span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre></div><p>输出非转义的数据到模板上</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> code <span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h3> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i ejs
</code></pre></div><p>js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ejs <span class="token operator">=</span>  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;抽烟只抽煊赫门，一生只爱一个人&quot;</span>

<span class="token keyword">let</span> weather <span class="token operator">=</span> <span class="token string">&quot;杜苏芮&quot;</span>

<span class="token keyword">let</span> myHtml <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./index.ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//使用 ejs 渲染</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> ejs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myHtml<span class="token punctuation">,</span> <span class="token punctuation">{</span>str<span class="token punctuation">,</span> weather<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><p>html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>&lt;%= str %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>&lt;%= weather %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="列表渲染"><a href="#列表渲染" class="header-anchor">#</a> 列表渲染</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ejs <span class="token operator">=</span>  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> bookName <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;《武动乾坤》&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;《斗破苍穹》&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;《我妈平砍连击带顺劈》&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;《复活吧我的爱人》&quot;</span><span class="token punctuation">]</span>

<span class="token comment">/*
原生的js 实现
let str = &quot;&lt;ul&gt;&quot;

bookName.forEach(item =&gt; {
    str += `&lt;li&gt;${item}&lt;/li&gt;`
})

str += &quot;&lt;/ul&gt;&quot;

console.log(str)*/</span>


<span class="token keyword">let</span> html <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./index.ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> ejs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token punctuation">{</span>bookName<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><p>html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--    &lt;li&gt;《武动乾坤》&lt;/li&gt;
    &lt;li&gt;《斗破苍穹》&lt;/li&gt;
    &lt;li&gt;《我妈平砍连击带顺劈》&lt;/li&gt;
    &lt;li&gt;《复活吧我的爱人》&lt;/li&gt;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>数据列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    &lt;% bookName.forEach(item =&gt; { %&gt;
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>&lt;%= item %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    &lt;%}) %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="条件渲染"><a href="#条件渲染" class="header-anchor">#</a> 条件渲染</h3> <p>js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ejs <span class="token operator">=</span>  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> isLogin <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">let</span> html <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./index.ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> ejs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token punctuation">{</span>isLogin<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><p>html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    &lt;% if(isLogin){ %&gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>登录成功<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    &lt;%} else {%&gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>请登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    &lt;%}%&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="express-使用-ejs模板"><a href="#express-使用-ejs模板" class="header-anchor">#</a> express 使用 ejs模板</h2> <p><img src="data:image/png;base64,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" alt="image-20230728151307715"></p> <p>js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//设置模板引擎</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;view engine&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//设置模板引擎文件的存放位置</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;views&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./views&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">//创建路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token string">&quot;复活吧我的爱人&quot;</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ejs</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>&lt;%= title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="express-generator"><a href="#express-generator" class="header-anchor">#</a> express-generator</h2> <p>https://www.expressjs.com.cn/starter/generator.html</p> <blockquote><p>通过应用生成器工具 <code>express-generator</code> 可以快速创建一个应用的骨架。</p> <p>不需要像之前一样一点一点的安装（init。。。）</p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> express-generator

</code></pre></div><ol start="2"><li>快速生成应用骨架</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>express <span class="token parameter variable">-e</span> 11_generator
</code></pre></div><ol start="3"><li>安装依赖</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i
</code></pre></div><ol start="4"><li>修改 <code>/bin/www</code>文件</li></ol> <p><img src="/learn-inmind/assets/img/image-20230728150032077.1341e31f.png" alt="image-20230728150032077"></p> <p>修改package.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon ./bin/www&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>启动</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> start
</code></pre></div><p>访问：www.inmind.com  或者 http://127.0.0.1/</p> <p><img src="/learn-inmind/assets/img/image-20230728150115071.14824d0a.png" alt="image-20230728150115071"></p> <h3 id="讲解"><a href="#讲解" class="header-anchor">#</a> 讲解</h3> <blockquote><p>这是前缀，</p> <p>比如用户是 <code>users</code>那么和用户相关的都以 <code>/users</code> 开头</p></blockquote> <p><img src="/learn-inmind/assets/img/image-20230728150912467.2b9bfa4b.png" alt="image-20230728150912467"></p> <p>新增路由</p> <p><img src="/learn-inmind/assets/img/image-20230728150933419.d5a9b5fe.png" alt="image-20230728150933419"></p> <p><img src="/learn-inmind/assets/img/image-20230728150942780.45f49087.png" alt="image-20230728150942780"></p> <h2 id="文件上传"><a href="#文件上传" class="header-anchor">#</a> 文件上传</h2> <h3 id="基本样式"><a href="#基本样式" class="header-anchor">#</a> 基本样式</h3> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* GET home page. */</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我走的是前缀为 / 的 路由&quot;</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Express'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//显示表单</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/show'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我走的是前缀为 / 的 路由&quot;</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'showInput'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/fileUpload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>

</code></pre></div><p>showInput.ejs</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">body</span> <span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #34495e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #191919<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">opacity</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;text&quot;]</span><span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #3498db<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 14px 10px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;file&quot;]</span><span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #3498db<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 14px 10px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box h1</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box input[type=&quot;text&quot;]:focus</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 280px<span class="token punctuation">;</span>
            <span class="token property">border-color</span><span class="token punctuation">:</span> #2ecc71<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box button</span> <span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #2ecc71<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 14px 40px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
            <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.box button:hover</span> <span class="token punctuation">{</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #2ecc71<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

 <span class="token comment">&lt;!--文件上传必须的属性 ：multipart/form-data--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/fileUpload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>文件上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户名<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>portrait<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>点击提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230728154252158.ded85a8a.png" alt="image-20230728154252158"></p> <p><img src="/learn-inmind/assets/img/image-20230728154241015.87065e2f.png" alt="image-20230728154241015"></p> <h3 id="文件处理"><a href="#文件处理" class="header-anchor">#</a> 文件处理</h3> <blockquote><p>使用： <code>formidable</code>工具包， 处理文件请求会非常简单</p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i formidable
</code></pre></div><ol start="2"><li>使用</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> formidable <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;formidable&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>

<span class="token comment">/* GET home page. */</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我走的是前缀为 / 的 路由&quot;</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Express'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//显示表单</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/show'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我走的是前缀为 / 的 路由&quot;</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'showInput'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/portrait'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">//创建 form对象</span>
  <span class="token keyword">let</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">formidable<span class="token punctuation">.</span>IncomingForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">multiples</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">uploadDir</span><span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/../public/images'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">keepExtensions</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//解析请求报文</span>
    form<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fields<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>

      <span class="token comment">//服务器 把偶才能改图片的路径</span>
      <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">&quot;/images/&quot;</span> <span class="token operator">+</span> files<span class="token punctuation">.</span>portrait<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>newFilename

      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>

</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230728162219579.6f287bbf.png" alt="image-20230728162219579"></p> <h1 id="实战-基础版"><a href="#实战-基础版" class="header-anchor">#</a> 实战-基础版</h1> <h2 id="构建项目"><a href="#构建项目" class="header-anchor">#</a> 构建项目</h2> <ol><li>生成骨架</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>express <span class="token parameter variable">-e</span> 08-project
</code></pre></div><ol start="2"><li>安装依赖</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> 08-project
<span class="token function">npm</span> i
</code></pre></div><ol start="3"><li>修改<code>package.json</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230730094440729.cd32c551.png" alt="image-20230730094440729"></p> <ol start="4"><li>启动</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> start
</code></pre></div><ol start="5"><li>修改/routes/index.js</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//列表</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/account'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;账本列表&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//记录添加</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/account/create'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;添加&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>

</code></pre></div><h2 id="静态页面"><a href="#静态页面" class="header-anchor">#</a> 静态页面</h2> <ol><li>修改 /routes/index.js</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730101820397.19fc0f42.png" alt="image-20230730101820397"></p> <ol start="2"><li>/views/list.ejs</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">label</span> <span class="token punctuation">{</span>
            <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.panel-body .glyphicon-remove</span><span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.panel-body:hover .glyphicon-remove</span><span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-12 col-lg-8 col-lg-offset-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>记账本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accounts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel panel-danger<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-heading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2023-07-05<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>抽烟只抽煊赫门，一生只爱一个人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label label-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>支出<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>25 元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>glyphicon glyphicon-remove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel panel-success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-heading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2023-07-15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>7 月份发工资<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label label-success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>收入<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5000 元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>glyphicon glyphicon-remove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>修改 /routes/index.js</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730101912503.876a8b03.png" alt="image-20230730101912503"></p> <ol start="4"><li>/views/create.ejs</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>添加记录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--.../public/css/bootstrap.css--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/bootstrap.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/bootstrap-datepicker.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-12 col-lg-8 col-lg-offset-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>添加记录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>事项<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
                            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
                    <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发生时间<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
                            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span>
                    <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>类型<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>支出<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>收入<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>金额<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
                            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span>
                    <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remarks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>备注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remarks<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remarks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-primary btn-block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/bootstrap.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/bootstrap-datepicker.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/bootstrap-datepicker.zh-CN.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="获取表单数据"><a href="#获取表单数据" class="header-anchor">#</a> 获取表单数据</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//导入 body-parser 包</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;body-parser&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//解析 queryString 格式请求体的中间件</span>
<span class="token keyword">const</span> urlcodedParser <span class="token operator">=</span>  bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//列表</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/account'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//跳转到添加页面</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/account/create'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;create&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//添加记录</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/account&quot;</span><span class="token punctuation">,</span>urlcodedParser<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;添加成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>

</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230730105722976.29180cad.png" alt="image-20230730105722976"></p> <h2 id="lowdb使用"><a href="#lowdb使用" class="header-anchor">#</a> lowdb使用</h2> <blockquote><p>现在我们已经拿到传递过来的数据，但是这些数据需要进行<code>持久化保存</code>，而<code>lowdb</code>可以帮我们实现。</p></blockquote> <ol><li>安装lowdb</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i lowdb@1.0.0
</code></pre></div><ol start="2"><li>创建test文件夹，创建<code>lowdb.js</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230730110634864.313cefbc.png" alt="image-20230730110634864"></p> <div class="language-js extra-class"><pre class="language-js"><code></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//导入lowdb</span>
<span class="token keyword">const</span> low <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;lowdb&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> FileSync <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;lowdb/adapters/FileSync&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSync</span><span class="token punctuation">(</span><span class="token string">&quot;db.json&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//获取 db  对象</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">low</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span>

<span class="token comment">//初始化数据</span>
db<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">posts</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">//写数据</span>
<span class="token comment">/*db.get(&quot;posts&quot;).push({id: 2, title: &quot;今天天气不错&quot;}).write();
db.get(&quot;posts&quot;).push({id: 3, title: &quot;哈哈哈哈哈&quot;}).write();*/</span>

<span class="token comment">//读数据</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

<span class="token comment">//获取所有的 数据</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>启动</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">node</span> lowdb.js
</code></pre></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWAAAABiCAIAAADhvJ6kAAAQ8ElEQVR4nO3dfVBTZ74H8N8DCSGI8mJQHCmgEAiCaxbbXgOCe4eOdwPU4Q/4Z2tlO9ZkmLu7c2W6/ON4genszB3mFu7OuMOQP+qidscqO0VHiGPr7oiWdNsuzS5QQw4vIYigvHR5Bwt57h8nJCFvoJy8we8z/gHnPOc5j8ycb563JIRSCgih7WRgYAAA+Hy++2LDw8NBXmkPQiggYUAghFzCgEAIuYQBgRByCQMCIeQSBgRCyCUMCISQSxgQCCGXMCAQQi5hQCCEXOL5ugHe9rjPoOsbtD0SFBQUtWunJClhz+4oX7UKIf+EPQgwmUwT/5r68u//7Bkw+rotCPkXDAir75mBzWSEWkkIUaq5aAmHVSG0GQEwxOjr6wsLC9u3b5/Ts5TSr7/++ujRozweB/+X75mB75kBNwUkSQlpSYnOzjC6zs3fn/OqENoUf+9BjI6OXr9+/erVqyMjI45nKaW3b9++e/furVu3vN82hLY8fw+IvXv3ZmRkLCwsOGYEmw5arVYoFGZlZfmqhQDA1GURklKuAQBVPiGEkKw6xnJWrSQWtsdXLzRjRxTuq0LIy/w9IAghp06dkkqldhlhmw7vvvuuqwGId4jPt1Oqr5UBgKKVUkpp+3kxALDhkN9Zq6eUUkpbFZryFMvcglpJUsph9Zxe0lzHuKsKIR/w94AAZxnhV+nghlqZrwJFq+URlze0KgBUH9YxAKBuVgEoLq6eE59vwCRAficAAgIcMuLGjRv+nw6rEVAktzmULJEBaHS9q7+rmnGpAvmzwAgIWJsROp3O79NhdS3CPJNgxs4uAIA5K0CVj7MMyI8FTECATUYEQDpYmGcS1miQA4D4fHurAgAANOUpOBmJ/FMgBQSsZsS5c+cCIB3EksMA0Klz/dzLG9ipSwAA0JSXYkQgfxNgAQEAhJCoqIB404S8SAGguXlnncde3mBet7CZm0DIPwReQPgrcWGJzG7WUf5BrQw05Sk2m6bVytVlTrXS5nCvTmMzn+mkKhQoTB0dppYWU0cH1evp9LSvm7NZZLt9cY7juzlfiuut1gDA1GWZZyFltXqbrRD5KksRRSs7A2F/xuYC11Uhv0P1ejoyQhmGMgzMzMC+fUE5OSQzk+za5eumubPxL87BgHg5bgMCbXF0epr29tKODjoyAiMj8N13AECTkoIKC4MyM0lKiq8buFEbD4gAeLMWt2KiI314OQospo4OyjDw9CnbRyCzs+xxumMHOXEiqKCA5OT4eWdhk7ZdQIiiIkVR+JAjJ6zjhY4OOjJCRkdtzxK2s5CZGVRYGECdhU3adgGBEIuOjNCRETYLqF5PetesIRFLsR07SGZm0IkTJDOT+P/iOtcwINC2YJ4+cDZeAJs4sJaPjWWnG4N+9jNvttPfYECgrYnq9ZRhLH0Ex/GCc2wonDixDTsLTmFAoK3AOl5gGPr0qavxgvNrY2NJZmZALE96HwYECjx24wV2udHCfRxYKwnA5UnvI93d3b5uA9qOyOxszI0bk2+/vRwTs27hUJ2OPz7On5gI6+kRDA0Fz8+/2k1XhMKZn/50USKZOXKEhoe/WiVbAPvBS+vugxgbG8MeBPIBgdG479KlkImJpfj4qbfesjvLGx8XGI2CoSHB0BBvbEz45Mkmb7cYF7eQmjp9/PhSfPwmq9puMCCQt0V8/vne69fZn3d9+eX0sWOCJ08EQ0MCozFkYiKsp4eTu6wIhfOpqXOZmfOpqcsiESd1bkM4xEDeQ2ZnY//4x51rpwy49WL37jmpdD41de7oUc/dJdDhEAP5nVCdbv8f/vDK0wfuzbChkJmJnQVuYUB40NKPywI+b3RyyvFUuFAQLgz1fpN8JfrWLdHt29zW+WL37vnUVLa/sJ1nHD0KA8JT2FyIjY54NunsQwGid22TgOCNj8d+/DFXMwsAsBgXN5WdvSiR4IyjF2BAeMTo5NSzyem90dt9182O776L/fjjzQ8rcHnSV/ATpbjHpoMnaqZtlenp6ZVt1PbXdxoNL3X5xstvkuj69f2XLm0mHRbj4n7IyxusrOy7dOn52bPT2dmYDl6GPQiOeS4dAojAaNxz+bLQ+CpflY7Lk34FA4JLfp4OJLe6u7va03fZ+ejRnk8/fdmOAy5P+icMCM4s/bgMALbzDuFCge+a4zMLEsnoL38pGBoyb4teWNjIVU9++9uN7LlGXoYBwRkBnxcbHeG+DC84iM/jLS692GCdbZXpZU3mn6UVLdcOOC9G2yozLOWguL6rKpc4ecsSW6y4vqs613zW0PhOQY3WcpnluN2t7epkryqu78q7b72t5fJlkWhZJJo7enQSAADMm6YHBwVDQ2F6vav/qbCnZwYDwv9gQHDGzfgiNIS/J2rXjtCQED4PACilpvU+K5hSw5XTBTVaaUXLtdJEAgBtlemn70kdS2prCjKkFS1dXYmEUNpWlVFWltFrucqNtsr0siZpRUtXaSKh1HCl6ooh54ylkqbVUGBb4lhnU1kG1Hd1V5sL1JSdPujspkvx8Uvx8ZCdbf5TPH7Mvski1GgMtXmThZBhZo4fd99g5H24iuFhlO4XRabGx4aFBPf3MjPT0wDQyzATY2Purxu8cqFGC8X11kcut7pbmax1UlRa0XLtTCIhAEBIblVLhRS0NZcfrteutvtNAMVKtn5CEkurS9lKHlaVNYG0osXcZSAk8cy1+mLQ1ly4YrDNteJ6tstASOKZ323opgCwmJY2dfLk87NnjdXVzO9/b/zgg/G3356RSvnr/UGQT2BAeFbUrh2iyJ1///bb//voo6YbN4aHhwHgr3/5S0N9fePly7MzM06votTw4J4WpBXv5aw5npNX7FhYevJEou2AIuHESSlA0/22jXyhgUMxu+BgEZKbVwygvffA5gsDivNsGpdwIHn9m9mj4eGLaWmTRUUjv/71cEXFy1eAPA4DwrOid4VPjI/fbW2NjIr6z9/8RpKWBgBnz507+fOfGwcHv/j8cxfXGfu1AMkHEp1NJdhJPpBg+yshiRt7WOMPSgGgqSwjY83OiMGBXgDpQftNimzpdfQOGLbZ16xseRgQnsUPDhodHTWZTG+8+WZERKTx2YR+6NnMwtK/HTu2c+dO9k113KLUMLCB7/hcHTgAAGhrCry5gQoFEAwIzyLE/N1lwcHBKybTDzPzC0svZuYX2SMmk8ndxQ4vyIPOHv3eAbsvCjP2a531AZy0Lbe6u7uryxITFxoNlB0saPvt9ziZuzQJjtWgrQwDwlOOJL92JPm1ED5vemoKAPh8vslkftrZH/h8/sL8/MrKiuO1Tsf85okJB9p7D9bkyMP7TY4TE66xMdFSIWVjwXzrpoZGg7XO1YmJPKerp2gLw4DwIIPBcO/u3UcPH4piYpKSk+cWl9jj84tLlNI3jx1bXFz85OrVtgcPHK/NqaovBm1NQRU7icguJd4DZxMB2pqCKvPyATU0ni5rAmnF784ksFc1vsOOHuynBihtq6xss/xq7Ndaph2d3bqsCYrrq3IAbTO4D8KDjIODf/vqKx6PJ8vKEggE4zPmPYUvlldWTFSckrI/Lm7QYBg0GHJPnLC7lpDcqq56yCgryzBvRSqu77oGVRll9p0IaUWLsr8gPX319+L67urcddtGSG5VXmV6epm1li6btdKuloOnCyy3tj2LthX8yDnO2G2UOpL8GgAsLS199uc/M3r92XPnInbH9D55BgDhQkHS/j2f/ulPDMP84vTpg0lJ3mmh405KtD1t/CPncIjhKaOTU6OTUzweP+3QIQAYGxvj84LZU+x+yufPn0dERHgtHcA8x7lm+wJC7mFAeMqzyelnk9MrJlNQkPmP7PiqbTnlBdTQeKFGK614Dyca0cbhHIRnrZioUCgEgLHnz/m8YEl87NKPy+FhofPz87Ozs7GxsV5og+VtV9KKlk9KE71wR7RlYEBwJlwoAIfPmCMEDhw8GBMT85VGMz8/n338+G6R6NtvvvmbRrO8vHz0jTe80DCvfAoE2powIDgTLgx19Tm0773//lft7T063dTU1G6RSN/Tszc2tuDUqcREfD1Hfg1XMRDadnAVAyHEAd6hQ4d83QaEkFexE+fr9iAEAgH2IBBCLmFAIIRcwoBACLmEAYEQcgn3QXjQ3MLiDmHo4z4nn9QUEx0pior0fpMQeikYEJ7C5kJaUqKub9BpAQwI5P9wiOERj/sMrnIBoQCCAcE9btJBrSSEKNVcNOgVbqdWEkKy6piXuvwlyqMAgQHBMew7oK0E5yC4tH3TQd5AaYOvG4G4hwHBmbmFRQCQJFk/GT4mGqchUWDDIQZndghD05ISbf9xvk6hVhIbbmYMmLosuyP2Uxq2VbmbO1hzS9dTIg4zJmwL1rsM+TsMCM487jN8du+B4z+OqlcrCclXKVopS18rU+WvPtryIgWA5uad1eecuXNTAwAaneV7dhhdJ4BMwn4nH1OXRfJVslq9ua6LupSsDzsdb6kpTyEfSlZLtSrAesd125pSDqv16yXNOHsZqDAgAoNama8CWa2+QW4+ID7f3qoATXlpHQOrCWHJg16dBmQyGaiaza/dzJ2bGpCVFIoBgKkrLdeAorX9vNhcXN5ALx7WOLmrrFZvW0pfKwNN+f+u2x9QN6sAFBdXrxSfb7BUggIMBkRAsHvkWLb9BnmRAix5oG5WgazkYok1IXp11ny4c1MDstoP5OBQlz3zFRbiwhKZ9S7r2GAx5N9wkpIz7LyDR6peM0CwSpbI1v6salY3yOXqZhXIagvlEh1Ap44Budh8RAzAZgUoJBt5ST9sX0osOQzgrKvhpF0aVT5RremCoACEAbFZpul+03T/Jivhxb21yRrEhSWyck2njoFkXSf72i8uUoDq5h3mfKGu08nT/goYnZOZCidtOd/eqiP5KnYWoxwwJgIXBsRmmab7l598sclK1gkIseQwgErXC7DmMVvTGRAXlsjKy2/eUcNNjaykUQzsuEHFHgHFRdsxBduxsDng9NF3KNWr0zjryTjB7otQK80xUVpXiBERkHAOgmO/qnnY+uUgABhHZz765B//VfvIcmQT2CmGD9cuBrATE0WWacvCEhlodM06jaW3kCxZPWItZr/iAQCWZQ879qXUzSrHiQm3zW6gVF8rW7OeggIKBoSnXGnpmZl7kff6/vzseHH8ZjdEyBtaFaApT7FsKWDqsvJVoGhtsHYM2H6GSmVNA3FhiQxUKtWaV31nVaXcBOt0hpXjDWW1jeaegONWCwu10mbnA9vNKZI7FkMBAIcYnvLDzNLhpOj/kCWE8DlJYXkD1UuyUvKJynxAVqunjssatvmwOjOhsXvVlzfQViD5lqoUrbQdlCTfvhMhq9Vf1KVYv6lP0UobNvKgyxuKlITku2wnChyEUurrNgS25Sdf2M5B/KrmYX52fH52QsujQXW7kccjP0kWFR6P3xMd5qaS0GP/4/mWepJaye7i2lCAIF8bGBiADXyq9fDwMA4xPKXgeMJ/v3/0VE7i07HZjz75x+Lisq9b5EGMrhPHEVsSBgQ3OnRj03Mvegb/BQCCkGD24J7osH9/PS77yL65heWRyXmfNtCTmLrSco3D3iu0FeAcBAemZl9cae1ZXqYAEBrKk6aIAOCzv/bf/2aYLRC9SxC3J9yXTfQM8zIm4E6HLQsDggMR4SEX3nv9n73jwUFB0pTdkTsFAJB2IIrtSogihYeTovm8LdhZw0+B2PIwILgRExWa90ac7RFJYpQkMcpX7UGIE7iKgdC2g6sYCCEOYEAghFzCgEAIuYQBgRByCQMCIeTS/wNqjOIGQMfysAAAAABJRU5ErkJggg==" alt="image-20230730111432709"></p> <p><img src="/learn-inmind/assets/img/image-20230730112409785.2ed83689.png" alt="image-20230730112409785"></p> <h2 id="保存数据"><a href="#保存数据" class="header-anchor">#</a> 保存数据</h2> <ol><li>创建data文件夹并创建 <code>db.json</code></li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;account&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><code>/routes/index.js</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230730113220833.8357a067.png" alt="image-20230730113220833"></p> <p><img src="/learn-inmind/assets/img/image-20230730150231318.eaa4de88.png" alt="image-20230730150231318"></p> <ol start="3"><li>测试</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730113458431.0ad847ae.png" alt="image-20230730113458431"></p> <p><img src="/learn-inmind/assets/img/image-20230730113517646.b4f5a1ab.png" alt="image-20230730113517646"></p> <p><img src="/learn-inmind/assets/img/image-20230730150245713.5819b6e0.png" alt="image-20230730150245713"></p> <blockquote><p>发现有个问题，数据没有id，这样在后面做<code>删除</code>或者<code>更新</code> 不太方便，以最好加上 <code>id</code> (<code>唯一</code>)。</p> <p>使用 <code>uuid</code> ，使用 <code>shortid</code></p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i shortid
</code></pre></div><ol start="2"><li>导入并使用</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730135841487.174ef13c.png" alt="image-20230730135841487"></p> <p><img src="/learn-inmind/assets/img/image-20230730150205355.041fdbb6.png" alt="image-20230730150205355"></p> <h2 id="成功提醒"><a href="#成功提醒" class="header-anchor">#</a> 成功提醒</h2> <blockquote><p>提示信息最好不要写死，通过数据传递的方式显示，还有跳转，这样可以实现页面复用</p></blockquote> <ol><li>创建 <code>views/success.ejs</code></li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">.h</span> <span class="token punctuation">{</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert alert-success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span> &lt;%= msg %&gt; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= url %&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击跳转<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li><code>routes/index.js</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230730150146073.461bfc8d.png" alt="image-20230730150146073"></p> <ol start="3"><li>测试</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730140958993.554f1adf.png" alt="image-20230730140958993"></p> <p><img src="/learn-inmind/assets/img/image-20230730141005015.520d4666.png" alt="image-20230730141005015"></p> <h2 id="列表"><a href="#列表" class="header-anchor">#</a> 列表</h2> <ol><li><code>/routes/index.js</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230730143416555.2850cbf8.png" alt="image-20230730143416555"></p> <ol start="2"><li>修改list.ejs</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730143508114.d8ba4dd2.png" alt="image-20230730143508114"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">label</span> <span class="token punctuation">{</span>
            <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.panel-body .glyphicon-remove</span><span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.panel-body:hover .glyphicon-remove</span><span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-12 col-lg-8 col-lg-offset-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>记账本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accounts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                &lt;% accounts.forEach(item =&gt; { %&gt;
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel &lt;%= item.type === '-1' ? 'panel-danger' : 'panel-success' %&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-heading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&lt;%= item.time %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&lt;%= item.title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label &lt;%= item.type === '-1' ? 'label-warning' : 'label-success' %&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                    &lt;%= item.type === '-1' ? '支出' : '收入'%&gt;
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&lt;%= item.account %&gt; 元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-xs-2 text-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>glyphicon glyphicon-remove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                &lt;% }) %&gt;
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h2> <ol><li>/routes/index.js</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//删除记录</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/account/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id

  <span class="token comment">//删除</span>
  db<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;accounts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//提醒</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&quot;删除成功&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/account&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>访问 http://127.0.0.1:3000/account/xFdn-54H7</p> <p><img src="/learn-inmind/assets/img/image-20230730150106431.583219a0.png" alt="image-20230730150106431"></p> <ol start="2"><li>修改list.ejs</li></ol> <blockquote><p>现在删除功能其实已经可以了，但是页面不行，</p> <p>因为列表中的项 没有绑定<code>id</code></p></blockquote> <p><img src="/learn-inmind/assets/img/image-20230730150729854.3bd35bd3.png" alt="image-20230730150729854"></p> <h1 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> MongoDB</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <blockquote><p>MongoDB 是一个基于分布式文件存储的数据库，官方地址 https://www.mongodb.com/</p></blockquote> <blockquote><p>数据库（DataBase）是按照数据结构来组织、存储和管理数据的 应用程序</p> <p><code>数据库的主要作用就是 管理数据</code> ，<code>对数据进行 增（c）、删（d）、改（u）、查（r）</code></p></blockquote> <p>数据库管理数据的特点：</p> <blockquote><p>相比于纯文件管理数据，数据库管理数据有如下特点：</p> <ol><li>速度更快</li> <li>扩展性更强</li> <li>安全性更强</li></ol></blockquote> <h2 id="核心概念"><a href="#核心概念" class="header-anchor">#</a> 核心概念</h2> <blockquote><p>Mongodb 中有三个重要概念需要掌握</p> <ul><li><code>数据库（database）</code> 数据库是一个数据仓库，数据库服务下可以创建很多数据库，数据库中可以存放很多集合</li> <li><code>集合（collection）</code> 集合类似于 JS 中的数组，在集合中可以存放很多文档</li> <li><code>文档（document）</code> 文档是数据库中的最小单位，类似于 JS 中的对象</li></ul></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;accounts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Rxn8eGgCo&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;抽烟只抽煊赫门，一生只爱一个人&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;-1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;remarks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;买烟&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UOwNxKrLR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;工资&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-10&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;remarks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;发工资了&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;users&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">18</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">22</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>大家可以通过 JSON 文件来理解 Mongodb 中的概念</p> <ul><li>一个 JSON 文件 好比是一个 数据库 ，一个 Mongodb 服务下可以有 N 个数据库</li> <li>JSON 文件中的 一级属性的数组值 好比是 <code>集合</code></li> <li>数组中的对象好比是 <code>文档</code></li> <li>对象中的属性有时也称之为 <code>字段</code></li></ul></blockquote> <blockquote><p>一般情况下</p> <ul><li><code>一个项目使用一个数据库</code></li> <li><code>一个集合会存储同一种类型的数据</code></li></ul></blockquote> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>下载地址：https://www.mongodb.com/try/download/community</p> <h3 id="简便安装"><a href="#简便安装" class="header-anchor">#</a> 简便安装：</h3> <blockquote><ol><li>将压缩包移动到 <code>C:\Program Files</code>下，然后解压</li> <li>创建 <code>C:\data\db</code> 目录，<code>mongodb</code> 会将数据默认保存在这个文件夹</li> <li>以 <code>mongodb</code> 中 <code>bin</code> 目录作为工作目录，启动命令行</li> <li>运行命令 <code>mongod</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230730154351661.a5dad16e.png" alt="image-20230730154351661"></p> <ol start="5"><li>新开一个命令 <code>mongo</code>   连接</li></ol> <p><img src="/learn-inmind/assets/img/image-20230730154407356.34fff15f.png" alt="image-20230730154407356"></p></blockquote> <p>访问：http://localhost:27017/</p> <p><img src="/learn-inmind/assets/img/image-20230730154326870.1d6f6145.png" alt="image-20230730154326870"></p> <h3 id="自定义安装"><a href="#自定义安装" class="header-anchor">#</a> 自定义安装</h3> <blockquote><ol><li>将压缩包移动到 <code>D:\environment\MongoDB</code>文件夹 下，然后解压</li> <li>创建 <code>D:\environment\MongoDB\data\db</code>目录</li> <li>创建<code>D:\environment\MongoDB\log</code> 目录 ，并创建<code>mongo.log</code> 文件</li></ol></blockquote> <p><img src="/learn-inmind/assets/img/image-20230730155429918.c0fd1172.png" alt="image-20230730155429918"></p> <blockquote><ol start="4"><li>进入 <code>mongodb-win32-x86_64-windows-5.0.18</code>，创建<code>mongo.conf</code></li></ol></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>mongod –config D:<span class="token punctuation">\</span>environment<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>mongodb5.0.18<span class="token punctuation">\</span>mongo.conf 
</code></pre></div><p>打开浏览器在url框中输入localhost:27017浏览器显示如下信息就说明配置好了，也已经成功启动了</p> <p><img src="/learn-inmind/assets/img/image-20230730160058795.bae6ff4c.png" alt="image-20230730160058795"></p> <ol start="5"><li>使用mongodb</li></ol> <blockquote><p>在下次使用mongodb的时候，需要再次启动<code>mongoldb</code> ，再次启动<code>mongodb</code>的方法和首次启动<code>mongodb</code>的方式相差不多，在bin目录下打开命令行，输入：</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>mongod –dbpath D:<span class="token punctuation">\</span>environment<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>data<span class="token punctuation">\</span>db
</code></pre></div><p>就可以启动mongodb了。这只是用来启动mongodb的服务命令，之后就可以使用Navicat连接mongodb了。</p> <p><img src="/learn-inmind/assets/img/image-20230730160134343.1f6e2a87.png" alt="image-20230730160134343"></p> <blockquote><p>出现界面，说明，mongo已经和 27017 端口进行连接了</p></blockquote> <h2 id="数据库命令"><a href="#数据库命令" class="header-anchor">#</a> 数据库命令</h2> <ol><li>显示所有的数据库</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> dbs
</code></pre></div><ol start="2"><li>切换到指定的数据库，如果数据库不存在会自动创建</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> 数据库名字
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230730161524596.c1bbe413.png" alt="image-20230730161524596"></p> <blockquote><p>看着没有创建，其实已经自动创建了 <code>herb</code>数据库，只是需要往里面创建集合才能看见</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>createCollection<span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230730161708347.66c61fc7.png" alt="image-20230730161708347"></p> <ol start="3"><li>显示当前所在的数据库</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db
</code></pre></div><p><img src="data:image/png;base64,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" alt="image-20230730161747066"></p> <ol start="4"><li>删除当前的数据库</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> 数据库名称

db<span class="token punctuation">.</span>dropDatabase<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230730161920171.1b36dad6.png" alt="image-20230730161920171"></p> <blockquote><p>重新创建 herb 数据库，方便等会操作集合</p></blockquote> <h2 id="集合的命令"><a href="#集合的命令" class="header-anchor">#</a> 集合的命令</h2> <ol><li>创建集合</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>createCollection<span class="token punctuation">(</span><span class="token string">'集合名称'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>createCollection<span class="token punctuation">(</span><span class="token string">'movies'</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>createCollection<span class="token punctuation">(</span><span class="token string">'books'</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>显示当前数据库中的所有集合</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> collections
</code></pre></div><ol start="3"><li>删除某个集合</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>集合名称<span class="token punctuation">.</span><span class="token keyword">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="image-20230730162605036"></p> <p><img src="data:image/png;base64,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" alt="image-20230730162556042"></p> <ol start="4"><li>重命名集合</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>集合名称<span class="token punctuation">.</span>renameCollection<span class="token punctuation">(</span><span class="token string">'新的集合名字'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230730162847502.4a92b5b5.png" alt="image-20230730162847502"></p> <h2 id="文档的命令"><a href="#文档的命令" class="header-anchor">#</a> 文档的命令</h2> <ol><li>插入文档</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>集合名称<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>文档对象<span class="token punctuation">)</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>{name:<span class="token string">&quot;松本一香老师&quot;</span><span class="token punctuation">,</span>age: <span class="token number">25</span>}<span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>查询文档</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 没有查询条件，会查询全部的文档</span>
db<span class="token punctuation">.</span>集合名称<span class="token punctuation">.</span>find<span class="token punctuation">(</span>查询条件<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>_id 是 <code>mongodb</code> 自动生成的唯一编号，用来唯一标识文档</p></blockquote> <p><img src="/learn-inmind/assets/img/image-20230731094021007.bbc0e9e3.png" alt="image-20230731094021007"></p> <p><img src="/learn-inmind/assets/img/image-20230731094105062.f1db4647.png" alt="image-20230731094105062"></p> <ol start="3"><li>更新文档</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>集合名称<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>查询条件<span class="token punctuation">,</span> 新的文档<span class="token punctuation">)</span>

<span class="token comment">#重写</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>{name:<span class="token string">&quot;哈哈哈&quot;</span>}<span class="token punctuation">,</span>{name:<span class="token string">&quot;哈哈哈&quot;</span><span class="token punctuation">,</span> age: <span class="token number">20</span>}<span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230731094354012.26707871.png" alt="image-20230731094354012"></p> <blockquote><p>这种方式是重写， 如果不写name，那么更新后的值，就没有name属性</p> <p>如果只是想更新值，可以这么用</p> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>{name:<span class="token string">&quot;哈哈哈&quot;</span>}<span class="token punctuation">,</span> {$<span class="token keyword">set</span>: {age: <span class="token number">25</span>}}<span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230731094716967.5e0044dc.png" alt="image-20230731094716967"></p></blockquote> <ol start="4"><li>删除文档</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>db<span class="token punctuation">.</span>集合名称<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>条件<span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230731094825439.033584e3.png" alt="image-20230731094825439"></p> <h2 id="navicat-可视化连接"><a href="#navicat-可视化连接" class="header-anchor">#</a> navicat 可视化连接</h2> <p><img src="/learn-inmind/assets/img/image-20230731103457867.8eb78d90.png" alt="image-20230731103457867"></p> <p><img src="/learn-inmind/assets/img/image-20230731103351136.4fa164c5.png" alt="image-20230731103351136"></p> <p><img src="/learn-inmind/assets/img/image-20230731103430891.b7841eb9.png" alt="image-20230731103430891"></p> <h2 id="mongoose"><a href="#mongoose" class="header-anchor">#</a> Mongoose</h2> <p>官网：http://www.mongoosejs.net/</p> <h3 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h3> <blockquote><p>连接数据库要保证 <code>MongoDB</code> 服务处于启动状态，（注意不要选中 cmd中的文字，否则会暂停）</p></blockquote> <ol><li>初始化</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> init
</code></pre></div><ol start="2"><li>安装 mongoose</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i mongoose
</code></pre></div><h3 id="连接数据库"><a href="#连接数据库" class="header-anchor">#</a> 连接数据库</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="插入文档"><a href="#插入文档" class="header-anchor">#</a> 插入文档</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//创建文档的结构对象</span>
    <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
    <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> Number
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//创建模型对象</span>
    <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>

    <span class="token comment">//新增</span>
    BoolModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;一只特立独行的猪&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">&quot;王小波&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">25</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token comment">//关闭数据库连接</span>
        mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token comment">//关闭数据库连接</span>
        mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="字段类型"><a href="#字段类型" class="header-anchor">#</a> 字段类型</h3> <p>文档结构可选的常用字段类型列表</p> <table><thead><tr><th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>字符串</td></tr> <tr><td><code>Number</code></td> <td>数字</td></tr> <tr><td><code>Boolean</code></td> <td>布尔值</td></tr> <tr><td><code>Array</code></td> <td>数组，也可以使用 [] 来标识</td></tr> <tr><td><code>Date</code></td> <td>日期</td></tr> <tr><td><code>Buffer</code></td> <td>Buffer 对象(图片、视频)</td></tr> <tr><td><code>Mixed</code></td> <td>任意类型，需要使用 mongoose.Schema.Types.Mixed 指定</td></tr> <tr><td><code>ObjectId</code></td> <td>对象 ID，需要使用 mongoose.Schema.Types.ObjectId 指定</td></tr> <tr><td><code>Decimal128</code></td> <td>高精度数字，需要使用 mongoose.Schema.Types.Decimal128 指定</td></tr></tbody></table> <h3 id="字段验证"><a href="#字段验证" class="header-anchor">#</a> 字段验证</h3> <blockquote><p><code>Mongoose</code> 有一些内建验证器，可以对字段值进行验证</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//创建文档的结构对象</span>
    <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
    <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//类型</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//不能为空</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">//唯一值 (要生效必须重建集合， 没有办法在旧集合中生效)</span>
            <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//默认值</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;herb&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//枚举值</span>
            <span class="token literal-property property">eum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;科幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;玄幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;都市&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//创建模型对象</span>
    <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>

    <span class="token comment">//新增</span>
    BoolModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;一直特立独行的猪222&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'111'</span><span class="token punctuation">,</span> <span class="token string">'222'</span><span class="token punctuation">,</span> <span class="token string">'333'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;科幻&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token comment">//关闭数据库连接</span>
        mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token comment">//关闭数据库连接</span>
        mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="删除文档"><a href="#删除文档" class="header-anchor">#</a> 删除文档</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//创建文档的结构对象</span>
    <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
    <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//类型</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//不能为空</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">//唯一值 (要生效必须重建集合， 没有办法在旧集合中生效)</span>
            <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//默认值</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;herb&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//枚举值</span>
            <span class="token literal-property property">eum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;科幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;玄幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;都市&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//创建模型对象</span>
    <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>

    <span class="token comment">//删除单条</span>
<span class="token comment">/*    BoolModel.deleteOne({_id: &quot;64c7286031721ee13ff63d4a&quot;})
        .then((data) =&gt; {
            console.log(data)
        })
        .catch((err) =&gt; {
            console.log(err)
        })*/</span>

    <span class="token comment">//删除多条</span>
    BoolModel<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="更新文档"><a href="#更新文档" class="header-anchor">#</a> 更新文档</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//创建文档的结构对象</span>
    <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
    <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//类型</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//不能为空</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">//唯一值 (要生效必须重建集合， 没有办法在旧集合中生效)</span>
            <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//默认值</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;herb&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//枚举值</span>
            <span class="token literal-property property">eum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;科幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;玄幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;都市&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//创建模型对象</span>
    <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>

    <span class="token comment">//更新单条数据</span>
    <span class="token comment">/*BoolModel.updateOne({name:&quot;一直特立独行的猪111&quot;}, {price: 9.9})
        .then((data) =&gt; {
            console.log(data)
        })
        .catch((err) =&gt; {
            console.log(err)
        })*/</span>

    <span class="token comment">//更新多条数据</span>
    BoolModel<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="查询文档"><a href="#查询文档" class="header-anchor">#</a> 查询文档</h3> <blockquote><p>在 mongodb 不能 &gt; &lt; &gt;= &lt;= !== 等运算符，需要使用替代符号</p> <ul><li><strong><code>lt</code>：<code>less than</code></strong> 小于</li> <li><strong><code>le</code>：<code>less than or equal to</code></strong> 小于等于</li> <li><strong><code>eq</code>：<code>equal to</code></strong> 等于</li> <li><strong><code>ne</code>：<code>not equal to</code></strong> 不等于</li> <li><strong><code>ge</code>：<code>greater than or equal to</code></strong> 大于等于</li> <li><strong><code>gt</code>：<code>greater than</code></strong> 大于</li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//创建文档的结构对象</span>
    <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
    <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//类型</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//不能为空</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">//唯一值 (要生效必须重建集合， 没有办法在旧集合中生效)</span>
            <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//默认值</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;herb&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//枚举值</span>
            <span class="token literal-property property">eum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;科幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;玄幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;都市&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//创建模型对象</span>
    <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>

    <span class="token comment">//价格小于20</span>
    <span class="token comment">/*BoolModel.find({price: {$lt: 20}}).then((data) =&gt; {
        console.log(data)
    })*/</span>

    <span class="token comment">//逻辑 或</span>
    <span class="token comment">/*BoolModel.find({$or: [{author: &quot;王小波&quot;}, {author: &quot;herb&quot;}]}).then((data) =&gt; {
        console.log(data)
    })*/</span>

    <span class="token comment">// 逻辑与  价格 大于10  小于 50</span>
    <span class="token comment">/*BoolModel.find({
        $and: [{price:{$gt:10}}, { price: {$lt:50} }]
    }).then((data) =&gt; {
        console.log(data)
    })*/</span>

    <span class="token comment">//正则表达式</span>
    BoolModel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">3</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="个性化读取"><a href="#个性化读取" class="header-anchor">#</a> 个性化读取</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 导入 mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 连接 数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//3. 设置连接回调</span>
<span class="token comment">//连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//创建文档的结构对象</span>
    <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
    <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//类型</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//不能为空</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">//唯一值 (要生效必须重建集合， 没有办法在旧集合中生效)</span>
            <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//默认值</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;herb&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token comment">//枚举值</span>
            <span class="token literal-property property">eum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;科幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;玄幻&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;都市&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//创建模型对象</span>
    <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>

    <span class="token comment">// 自定义查询</span>
    <span class="token comment">//只查询 名字 和 作者</span>
    <span class="token comment">/*BoolModel.find()
        .select({name: true, author: true})
        .then((data) =&gt; {
            console.log(data)
        })*/</span>

    <span class="token comment">//字段排序</span>
    <span class="token comment">// 价格从大到小</span>
    <span class="token comment">/*BoolModel.find()
        .select({name: true, price: true})
        //TODO desc 从大到小, '' 从小到达
        .sort({price: &quot;desc&quot;})
        .then((data) =&gt; {
            console.log(data)
        })*/</span>

    <span class="token comment">//数据截断</span>
    <span class="token comment">// 跳过第一个数据，从第二个开始， 返回两个数据</span>
    BoolModel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//TODO desc 从大到小, '' 从小到大</span>
        <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//跳过</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">//限制两个</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//连接关闭</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h3> <ol><li>创建db文件夹， 创建 db.js</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {*} success 数据库连接成功的回调
 * @param {*} error 数据库连接失败的回调
 */</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">success<span class="token punctuation">,</span> error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判断 error 是 默认值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> error <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">error</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//1. 导入 mongoose</span>
    <span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2. 连接 数据库</span>
    mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/herb&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//3. 设置连接回调</span>
    <span class="token comment">//连接成功</span>
    mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//连接失败</span>
    mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//连接关闭</span>
    mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接关闭&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>测试连接</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./db/db&quot;</span><span class="token punctuation">)</span>

<span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230731135151595.55922db0.png" alt="image-20230731135151595"></p> <ol start="3"><li>操作数据</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./db/db&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">//创建文档的结构对象</span>
        <span class="token comment">//设置集合中文档的属性以及属性的类型</span>
        <span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token literal-property property">author</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token literal-property property">price</span><span class="token operator">:</span> Number
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">//创建模型对象</span>
        <span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>
        <span class="token comment">//新增</span>
        BoolModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;恒美老师的一生&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token comment">//关闭数据库连接</span>
            mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                <span class="token comment">//关闭数据库连接</span>
                mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230731135436158.e02fe319.png" alt="image-20230731135436158"></p> <blockquote><p>测试成功</p> <p><code>现在只是将连接部分抽离了出来，实际上 结构属性 一直在重复</code></p></blockquote> <ol start="4"><li>创建<code>models</code>文件夹，创建<code>BookModel.js</code>，将  结构属性 部分的代码放进去,并暴露</li></ol> <p><img src="data:image/png;base64,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" alt="image-20230731140007142"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建文档的结构对象</span>
<span class="token comment">//设置集合中文档的属性以及属性的类型</span>
<span class="token keyword">let</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">price</span><span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//创建模型对象</span>
<span class="token keyword">let</span> BoolModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span>


<span class="token comment">//暴露出去</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> BoolModel
</code></pre></div><ol start="5"><li><code>index</code>中导入并使用</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./db/db&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> BoolModel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./models/BoolModel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span>

        <span class="token comment">//新增</span>
        BoolModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;恒美老师的一生111&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token comment">//关闭数据库连接</span>
            mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                <span class="token comment">//关闭数据库连接</span>
                mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/learn-inmind/assets/img/image-20230731140052261.fdb637a0.png" alt="image-20230731140052261"></p> <h3 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h3> <blockquote><p>将来如果要改变数据库的<code>ip</code> 、<code>端口</code>、<code>表名</code>，不可能在代码中修改。最好是集中管理</p></blockquote> <ol><li>创建<code>config</code>文件夹并创建 <code>config.js</code></li></ol> <p><img src="data:image/png;base64,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" alt="image-20230731140547798"></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">DBHOST</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token constant">DBPORT</span><span class="token operator">:</span> <span class="token number">27017</span><span class="token punctuation">,</span>
    <span class="token constant">DBNAME</span><span class="token operator">:</span> <span class="token string">&quot;herb&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>修改<code>db.js</code></li></ol> <p><img src="/learn-inmind/assets/img/image-20230731140617338.f92e277d.png" alt="image-20230731140617338"></p> <ol start="3"><li>测试</li></ol> <p><img src="/learn-inmind/assets/img/image-20230731140635382.d28683d9.png" alt="image-20230731140635382"></p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learn-inmind/blog/nodejs1.html" class="prev">
          nodejs1
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#使用" class="sidebar-link reco-side-使用" data-v-b57cc07c>使用</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#路由" class="sidebar-link reco-side-路由" data-v-b57cc07c>路由</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#路由的使用" class="sidebar-link reco-side-路由的使用" data-v-b57cc07c>路由的使用</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#获取请求参数" class="sidebar-link reco-side-获取请求参数" data-v-b57cc07c>获取请求参数</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#获取路由参数" class="sidebar-link reco-side-获取路由参数" data-v-b57cc07c>获取路由参数</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#响应" class="sidebar-link reco-side-响应" data-v-b57cc07c>响应</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#中间件" class="sidebar-link reco-side-中间件" data-v-b57cc07c>中间件</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#中间件的类型" class="sidebar-link reco-side-中间件的类型" data-v-b57cc07c>中间件的类型</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#全局中间件" class="sidebar-link reco-side-全局中间件" data-v-b57cc07c>全局中间件</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#路由中间件" class="sidebar-link reco-side-路由中间件" data-v-b57cc07c>路由中间件</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#静态资源中间件" class="sidebar-link reco-side-静态资源中间件" data-v-b57cc07c>静态资源中间件</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#获取请求数据body-paraser" class="sidebar-link reco-side-获取请求数据body-paraser" data-v-b57cc07c>获取请求数据body-paraser</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#图片防盗链" class="sidebar-link reco-side-图片防盗链" data-v-b57cc07c>图片防盗链</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#路由-router-模块化" class="sidebar-link reco-side-路由-router-模块化" data-v-b57cc07c>路由（Router）模块化</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#ejs模板引擎" class="sidebar-link reco-side-ejs模板引擎" data-v-b57cc07c>EJS模板引擎</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#常用语法" class="sidebar-link reco-side-常用语法" data-v-b57cc07c>常用语法</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#基本使用" class="sidebar-link reco-side-基本使用" data-v-b57cc07c>基本使用</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#列表渲染" class="sidebar-link reco-side-列表渲染" data-v-b57cc07c>列表渲染</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#条件渲染" class="sidebar-link reco-side-条件渲染" data-v-b57cc07c>条件渲染</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#express-使用-ejs模板" class="sidebar-link reco-side-express-使用-ejs模板" data-v-b57cc07c>express 使用 ejs模板</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#express-generator" class="sidebar-link reco-side-express-generator" data-v-b57cc07c>express-generator</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#讲解" class="sidebar-link reco-side-讲解" data-v-b57cc07c>讲解</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#文件上传" class="sidebar-link reco-side-文件上传" data-v-b57cc07c>文件上传</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#基本样式" class="sidebar-link reco-side-基本样式" data-v-b57cc07c>基本样式</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#文件处理" class="sidebar-link reco-side-文件处理" data-v-b57cc07c>文件处理</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#构建项目" class="sidebar-link reco-side-构建项目" data-v-b57cc07c>构建项目</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#静态页面" class="sidebar-link reco-side-静态页面" data-v-b57cc07c>静态页面</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#获取表单数据" class="sidebar-link reco-side-获取表单数据" data-v-b57cc07c>获取表单数据</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#lowdb使用" class="sidebar-link reco-side-lowdb使用" data-v-b57cc07c>lowdb使用</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#保存数据" class="sidebar-link reco-side-保存数据" data-v-b57cc07c>保存数据</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#成功提醒" class="sidebar-link reco-side-成功提醒" data-v-b57cc07c>成功提醒</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#列表" class="sidebar-link reco-side-列表" data-v-b57cc07c>列表</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#删除" class="sidebar-link reco-side-删除" data-v-b57cc07c>删除</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#介绍" class="sidebar-link reco-side-介绍" data-v-b57cc07c>介绍</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#核心概念" class="sidebar-link reco-side-核心概念" data-v-b57cc07c>核心概念</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#安装" class="sidebar-link reco-side-安装" data-v-b57cc07c>安装</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#简便安装" class="sidebar-link reco-side-简便安装" data-v-b57cc07c>简便安装：</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#自定义安装" class="sidebar-link reco-side-自定义安装" data-v-b57cc07c>自定义安装</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#数据库命令" class="sidebar-link reco-side-数据库命令" data-v-b57cc07c>数据库命令</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#集合的命令" class="sidebar-link reco-side-集合的命令" data-v-b57cc07c>集合的命令</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#文档的命令" class="sidebar-link reco-side-文档的命令" data-v-b57cc07c>文档的命令</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#navicat-可视化连接" class="sidebar-link reco-side-navicat-可视化连接" data-v-b57cc07c>navicat 可视化连接</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#mongoose" class="sidebar-link reco-side-mongoose" data-v-b57cc07c>Mongoose</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#安装-2" class="sidebar-link reco-side-安装-2" data-v-b57cc07c>安装</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#连接数据库" class="sidebar-link reco-side-连接数据库" data-v-b57cc07c>连接数据库</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#插入文档" class="sidebar-link reco-side-插入文档" data-v-b57cc07c>插入文档</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#字段类型" class="sidebar-link reco-side-字段类型" data-v-b57cc07c>字段类型</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#字段验证" class="sidebar-link reco-side-字段验证" data-v-b57cc07c>字段验证</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#删除文档" class="sidebar-link reco-side-删除文档" data-v-b57cc07c>删除文档</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#更新文档" class="sidebar-link reco-side-更新文档" data-v-b57cc07c>更新文档</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#查询文档" class="sidebar-link reco-side-查询文档" data-v-b57cc07c>查询文档</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#个性化读取" class="sidebar-link reco-side-个性化读取" data-v-b57cc07c>个性化读取</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#模块化" class="sidebar-link reco-side-模块化" data-v-b57cc07c>模块化</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-inmind/blog/nodejs2.html#优化" class="sidebar-link reco-side-优化" data-v-b57cc07c>优化</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-inmind/assets/js/app.457f3b2d.js" defer></script><script src="/learn-inmind/assets/js/7.15c78656.js" defer></script><script src="/learn-inmind/assets/js/2.4e249c74.js" defer></script><script src="/learn-inmind/assets/js/1.9c787481.js" defer></script><script src="/learn-inmind/assets/js/14.7b647b8f.js" defer></script>
  </body>
</html>
